@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage
@{
    var productResponse = (ProductResponse?)ViewData["productResponse"];

    if (productResponse == null) return;

    var culture = Model.GetCultureFromDomains();

    int f = 0;
}
<aside>
    <h2 class="sr-only">Filters</h2>

    <button type="button" x-description="Mobile filter dialog toggle, controls the 'mobileFilterDialogOpen' state." class="inline-flex items-center lg:hidden">
        <span class="text-sm font-medium text-gray-700">Filters</span>
        <svg class="ml-1 h-5 w-5 flex-shrink-0 text-gray-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path d="M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"></path>
        </svg>
    </button>

    <div class="hidden lg:block">
        <div class="space-y-10 divide-y divide-gray-200">
            @foreach (var filter in productResponse.Filters)
            {
                int v = 0;

                <div class="@(f > 0 ? "pt-10" : "")">
                    <fieldset>
                        <legend class="block text-sm font-medium text-gray-900">@filter.Field.Title.GetValue(culture)</legend>
                        <div class="space-y-3 pt-6">
                            @foreach (var val in filter.Values)
                            {
                                v++;
                                var query = Context.Request.Query["filter_" + filter.Field.Id];
                                var value = val.GetValue(culture);
                                <div class="flex items-center">
                                    <input @@change="$event.target.form.submit(); " id="filter_@(filter.Field.Id)_@v" value="@value" name="filter_@filter.Field.Id" type="checkbox" class="h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500" @(query.Contains(value) ? "checked" : "")>
                                    <label for="filter_@(filter.Field.Id)_@v" class="ml-3 text-sm text-gray-600">@value</label>
                                </div>
                            }
                        </div>
                    </fieldset>
                </div>

                f++;
            }
        </div>
    </div>
</aside>
